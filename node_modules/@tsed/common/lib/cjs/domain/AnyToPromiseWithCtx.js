"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AnyToPromiseWithCtx = void 0;
const core_1 = require("@tsed/core");
class AnyToPromiseWithCtx extends core_1.AnyToPromise {
    constructor({ $ctx, err }) {
        super();
        this.$ctx = $ctx;
        this.err = err;
    }
    isDone() {
        const { $ctx } = this;
        return ($ctx === null || $ctx === void 0 ? void 0 : $ctx.isDone()) || super.isDone();
    }
    async call(cb) {
        return super.call(() => cb(this));
    }
    destroy() {
        // @ts-ignore
        delete this.$ctx;
    }
    isCanceledResponse(process) {
        return process === this.$ctx.getResponse();
    }
}
exports.AnyToPromiseWithCtx = AnyToPromiseWithCtx;
//# sourceMappingURL=AnyToPromiseWithCtx.js.map