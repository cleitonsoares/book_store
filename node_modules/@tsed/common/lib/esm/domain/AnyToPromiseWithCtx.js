import { AnyToPromise } from "@tsed/core";
export class AnyToPromiseWithCtx extends AnyToPromise {
    constructor({ $ctx, err }) {
        super();
        this.$ctx = $ctx;
        this.err = err;
    }
    isDone() {
        const { $ctx } = this;
        return ($ctx === null || $ctx === void 0 ? void 0 : $ctx.isDone()) || super.isDone();
    }
    async call(cb) {
        return super.call(() => cb(this));
    }
    destroy() {
        // @ts-ignore
        delete this.$ctx;
    }
    isCanceledResponse(process) {
        return process === this.$ctx.getResponse();
    }
}
//# sourceMappingURL=AnyToPromiseWithCtx.js.map