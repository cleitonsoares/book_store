{"version":3,"file":"JsonLayout.js","sourceRoot":"","sources":["../../../../src/layouts/components/JsonLayout.ts"],"names":[],"mappings":";AAAA,OAAO,KAAK,IAAI,MAAM,MAAM,CAAC;AAC7B,OAAO,EAAC,UAAU,EAAC,MAAM,qBAAqB,CAAC;AAE/C,OAAO,EAAC,MAAM,EAAC,MAAM,sBAAsB,CAAC;AAC5C,OAAO,EAAC,YAAY,EAAC,MAAM,wBAAwB,CAAC;AAGpD,IAAa,UAAU,GAAvB,MAAa,UAAW,SAAQ,UAAU;IACxC,SAAS,CAAC,YAAsB,EAAE,cAAuB;QACvD,MAAM,GAAG,GAAQ;YACf,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE;YAChC,SAAS,EAAE,YAAY,CAAC,SAAS;YACjC,YAAY,EAAE,YAAY,CAAC,YAAY;YACvC,KAAK,EAAE,YAAY,CAAC,KAAK,CAAC,QAAQ,EAAE;SACrC,CAAC;QAEF,GAAG,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,OAAO,EAAE,EAAE;YACpD,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;gBAC/B,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;gBAE5B,IAAI,OAAO,CAAC,IAAI,EAAE;oBAChB,OAAO,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;iBACtC;gBAED,OAAO,IAAI,CAAC;aACb;YAED,OAAO,CAAC,GAAG,IAAI,EAAE,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACvD,CAAC,EAAE,EAAE,CAAC,CAAC;QAEP,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC;IAChE,CAAC;CACF,CAAA;AAzBY,UAAU;IADtB,MAAM,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC;GACV,UAAU,CAyBtB;SAzBY,UAAU","sourcesContent":["import * as Util from \"util\";\nimport {BaseLayout} from \"../class/BaseLayout\";\nimport {LogEvent} from \"../../core/LogEvent\";\nimport {Layout} from \"../decorators/layout\";\nimport {removeColors} from \"../utils/colorizeUtils\";\n\n@Layout({name: \"json\"})\nexport class JsonLayout extends BaseLayout {\n  transform(loggingEvent: LogEvent, timezoneOffset?: number): string {\n    const log: any = {\n      ...loggingEvent.context.toJSON(),\n      startTime: loggingEvent.startTime,\n      categoryName: loggingEvent.categoryName,\n      level: loggingEvent.level.toString()\n    };\n\n    log.data = loggingEvent.data.reduce((data, current) => {\n      if (typeof current === \"object\") {\n        Object.assign(log, current);\n\n        if (current.data) {\n          return [].concat(data, current.data);\n        }\n\n        return data;\n      }\n\n      return [...data, removeColors(Util.format(current))];\n    }, []);\n\n    return JSON.stringify(log) + (this.config[\"separator\"] || \"\");\n  }\n}\n"]}