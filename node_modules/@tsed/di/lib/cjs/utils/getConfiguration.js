"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getConfiguration = exports.mergeMount = void 0;
const core_1 = require("@tsed/core");
function mergeMount(m1 = {}, m2 = {}) {
    return Object.entries(m2).reduce((mount, [key, controllers]) => {
        return {
            ...mount,
            [key]: (mount[key] || []).concat(controllers)
        };
    }, m1);
}
exports.mergeMount = mergeMount;
function getConfiguration(module, configuration = {}) {
    const store = core_1.Store.from(module).get("configuration") || {};
    const config = {
        ...store,
        ...configuration
    };
    if (store.mount && configuration.mount) {
        config.mount = mergeMount(store.mount, configuration.mount);
    }
    if (store.componentsScan && configuration.componentsScan) {
        config.componentsScan = [...store.componentsScan, ...configuration.componentsScan];
    }
    return config;
}
exports.getConfiguration = getConfiguration;
//# sourceMappingURL=getConfiguration.js.map