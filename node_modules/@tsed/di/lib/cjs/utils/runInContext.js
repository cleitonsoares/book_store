"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.runInContext = exports.getContext = exports.getAsyncStore = void 0;
const async_hooks_1 = require("async_hooks");
let store;
function getAsyncStore() {
    store = store || new async_hooks_1.AsyncLocalStorage();
    return store;
}
exports.getAsyncStore = getAsyncStore;
function getContext() {
    return store === null || store === void 0 ? void 0 : store.getStore();
}
exports.getContext = getContext;
function runInContext(ctx, cb) {
    // istanbul ignore else
    return async_hooks_1.AsyncLocalStorage ? getAsyncStore().run(ctx, cb) : cb();
}
exports.runInContext = runInContext;
//# sourceMappingURL=runInContext.js.map