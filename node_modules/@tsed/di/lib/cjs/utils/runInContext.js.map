{"version":3,"file":"runInContext.js","sourceRoot":"","sources":["../../../src/utils/runInContext.ts"],"names":[],"mappings":";;;AAAA,6CAA8C;AAG9C,IAAI,KAAmC,CAAC;AAExC,SAAgB,aAAa;IAC3B,KAAK,GAAG,KAAK,IAAI,IAAI,+BAAiB,EAAE,CAAC;IACzC,OAAO,KAAK,CAAC;AACf,CAAC;AAHD,sCAGC;AAED,SAAgB,UAAU;IACxB,OAAO,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,QAAQ,EAAE,CAAC;AAC3B,CAAC;AAFD,gCAEC;AAED,SAAgB,YAAY,CAAC,GAAc,EAAE,EAAO;IAClD,uBAAuB;IACvB,OAAO,+BAAiB,CAAC,CAAC,CAAC,aAAa,EAAE,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;AACjE,CAAC;AAHD,oCAGC","sourcesContent":["import {AsyncLocalStorage} from \"async_hooks\";\nimport {DIContext} from \"../domain/DIContext\";\n\nlet store: AsyncLocalStorage<DIContext>;\n\nexport function getAsyncStore() {\n  store = store || new AsyncLocalStorage();\n  return store;\n}\n\nexport function getContext() {\n  return store?.getStore();\n}\n\nexport function runInContext(ctx: DIContext, cb: any) {\n  // istanbul ignore else\n  return AsyncLocalStorage ? getAsyncStore().run(ctx, cb) : cb();\n}\n"]}