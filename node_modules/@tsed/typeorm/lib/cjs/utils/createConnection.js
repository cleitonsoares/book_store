"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createConnection = void 0;
const core_1 = require("@tsed/core");
const typeorm_1 = require("typeorm");
async function createConnection(connectionOptions) {
    const connectionManager = (0, typeorm_1.getConnectionManager)();
    const name = (0, core_1.getValue)(connectionOptions, "name", "default");
    if (!connectionManager.has(name)) {
        connectionManager.create(connectionOptions);
    }
    const connection = connectionManager.get(name);
    if (!connection.isConnected) {
        await connection.connect();
    }
    return connection;
}
exports.createConnection = createConnection;
//# sourceMappingURL=createConnection.js.map