{"version":3,"file":"createConnection.js","sourceRoot":"","sources":["../../../src/utils/createConnection.ts"],"names":[],"mappings":";;;AAAA,qCAAoC;AACpC,qCAA4E;AAErE,KAAK,UAAU,gBAAgB,CAAC,iBAAoC;IACzE,MAAM,iBAAiB,GAAG,IAAA,8BAAoB,GAAE,CAAC;IACjD,MAAM,IAAI,GAAG,IAAA,eAAQ,EAAS,iBAAiB,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;IAEpE,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;QAChC,iBAAiB,CAAC,MAAM,CAAC,iBAAkB,CAAC,CAAC;KAC9C;IAED,MAAM,UAAU,GAAG,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAE/C,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE;QAC3B,MAAM,UAAU,CAAC,OAAO,EAAE,CAAC;KAC5B;IAED,OAAO,UAAU,CAAC;AACpB,CAAC;AAfD,4CAeC","sourcesContent":["import {getValue} from \"@tsed/core\";\nimport {Connection, ConnectionOptions, getConnectionManager} from \"typeorm\";\n\nexport async function createConnection(connectionOptions: ConnectionOptions): Promise<Connection> {\n  const connectionManager = getConnectionManager();\n  const name = getValue<string>(connectionOptions, \"name\", \"default\");\n\n  if (!connectionManager.has(name)) {\n    connectionManager.create(connectionOptions!);\n  }\n\n  const connection = connectionManager.get(name);\n\n  if (!connection.isConnected) {\n    await connection.connect();\n  }\n\n  return connection;\n}\n"]}